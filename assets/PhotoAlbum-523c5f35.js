import{u as L,s as G,r as M,b as N,o as i,c as C,d as H,w as j,e as m,F as K,f as O,p as Q,i as U,a as R,g as d,h as T}from"./index-d01d4c59.js";import{_ as X,u as Y,a as Z,E as ee,N as ae,p as s,S as oe,b as te,c as se,d as ne,e as le,f as ie,g as re}from"./navigation.min-61ca1940.js";const B=g=>(Q("data-v-8ffae971"),g=g(),U(),g),ce={class:"bg-slate-50 h-full flex justify-center items-center text-center"},ue=B(()=>R("div",{class:"absolute top-0 right-0"},null,-1)),de=B(()=>R("div",{class:"bg-wrapper absolute top-0 left-0 w-full h-full -z-10"},null,-1)),pe={__name:"PhotoAlbum",setup(g){L(e=>({"0a765eea":A.value}));const n=Y(),h=G(n),p=M(!1),q=[ee,ae],{gridCols:x}=Z(),r=M(null);console.log("gridCols.value",x.value),N(()=>`grid-cols-${x.value}`);const A=N(()=>`${x.value*18}rem`),F=e=>{var y,w,P,$,b,E,V,k,I;const{activeIndex:o,previousIndex:a}=e,l=(y=s[o])==null?void 0:y.validation;(w=s[o])==null||w.jumpTo;const t=(P=s[o])==null?void 0:P.name,c=($=h[t])==null?void 0:$.value,S=(b=s[o])==null?void 0:b.type,u=(E=s[a])==null?void 0:E.validation,v=(V=s[a])==null?void 0:V.jumpTo,J=(k=s[a])==null?void 0:k.name,f=(I=h[J])==null?void 0:I.value;l&&!l(c)&&(e.allowSlideNext=!1),p.value=!1,S==="input"&&document.querySelector(`input[name=${t}]`).focus(),(u&&!u(f)||!v&&o-a!==1)&&e.slideTo(e.previousIndex),u&&u(f)&&v&&v(f)?(e.slideTo(v(f)-1,300,!1),n.$patch({path:[...n.path,v(f)-1]})):n.$patch({path:[...n.path,o]})},W=e=>{var c,S,u;const o=(c=s[e.activeIndex])==null?void 0:c.validation,a=(S=s[e.activeIndex])==null?void 0:S.name,l=(u=h[a])==null?void 0:u.value;!o||o(l)?e.allowSlideNext=!0:e.allowSlideNext=!1;const t=n.path[n.path.length-2];n.$patch({path:n.path.slice(0,-1)}),e.slideTo(t,300,!1)},z=e=>{r.value=e},_=(e,o)=>{o&&e.validation&&e.validation(o)&&(r.value.allowSlideNext=!0,e.jumpTo?r.value.slideTo(e.jumpTo(o)):r.value.slideNext()),e.validation&&!e.validation(o)&&(r.value.allowSlideNext=!1,p.value=!0,document.querySelector(`input[name=${e.name}]`).focus()),e.validation||(r.value.allowSlideNext=!0,r.value.slideNext()),e.name==="備註"&&n.post()},D=N(()=>{var c;const e=n.path[n.path.length-1];console.log("index",e);const o=s[e].name;console.log("name",o);const a=(c=h[o])==null?void 0:c.value;console.log("val",a);const l=!s[e].validation;console.log("hasNoValidation",l);const t=s[e].validation&&s[e].validation(a);return console.log("isValid",t),n.path.length===1||t||l});return(e,o)=>(i(),C("div",ce,[ue,H(m(oe),{onSwiper:z,onSlideNextTransitionStart:F,onSlidePrevTransitionStart:W,effect:"cards",cardsEffect:{perSlideRotate:1},grabCursor:!0,modules:q,navigation:D.value},{default:j(()=>[(i(!0),C(K,null,O(m(s),(a,l)=>(i(),d(m(te),{key:a.question,"data-bg":l!==0},{default:j(()=>[de,a.type==="mainPage"?(i(),d(se,{key:0})):T("",!0),a.type==="welcomePage"?(i(),d(ne,{key:1,onToNextPage:t=>_(a)},null,8,["onToNextPage"])):T("",!0),a.type==="input"?(i(),d(le,{key:2,data:a,isShowErrorMsg:p.value,onToNextPage:t=>_(a,t)},null,8,["data","isShowErrorMsg","onToNextPage"])):a.type==="dropdown"?(i(),d(ie,{key:3,data:a,isShowErrorMsg:p.value,onToNextPage:t=>_(a,t)},null,8,["data","isShowErrorMsg","onToNextPage"])):a.type==="yesNo"?(i(),d(re,{key:4,data:a,isShowErrorMsg:p.value,onToNextPage:t=>_(a,t)},null,8,["data","isShowErrorMsg","onToNextPage"])):T("",!0)]),_:2},1032,["data-bg"]))),128))]),_:1},8,["navigation"])]))}},he=X(pe,[["__scopeId","data-v-8ffae971"]]);export{he as default};
